<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.10">
	<AutoTitle>false</AutoTitle>
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1">
		<Autofill>false</Autofill>
	</AutoCommandBar>
	<Events>
		<Event name="OnOpen">ПриОткрытии</Event>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<UsualGroup name="ГруппаЗаголовок" id="47">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа заголовок</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа заголовок</v8:content>
				</v8:item>
			</ToolTip>
			<Representation>None</Representation>
			<ShowTitle>false</ShowTitle>
			<ExtendedTooltip name="ГруппаЗаголовокРасширеннаяПодсказка" id="48"/>
			<ChildItems>
				<Button name="ПроверитьНовыеСообщения" id="49">
					<Type>UsualButton</Type>
					<Representation>PictureAndText</Representation>
					<CommandName>Form.Command.ПроверитьНовыеСообщения</CommandName>
					<ExtendedTooltip name="ПроверитьНовыеСообщенияРасширеннаяПодсказка" id="50"/>
				</Button>
			</ChildItems>
		</UsualGroup>
		<Table name="СписокСообщений" id="4">
			<ChangeRowSet>false</ChangeRowSet>
			<ChangeRowOrder>false</ChangeRowOrder>
			<RowSelectionMode>Row</RowSelectionMode>
			<Header>false</Header>
			<HorizontalLines>false</HorizontalLines>
			<VerticalLines>false</VerticalLines>
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<InitialListView>End</InitialListView>
			<EnableStartDrag>true</EnableStartDrag>
			<DataPath>СписокСообщений</DataPath>
			<AutoRefresh>true</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<ContextMenu name="СписокСообщенийКонтекстноеМеню" id="5"/>
			<AutoCommandBar name="СписокСообщенийКоманднаяПанель" id="6">
				<Autofill>false</Autofill>
			</AutoCommandBar>
			<ExtendedTooltip name="СписокСообщенийРасширеннаяПодсказка" id="7"/>
			<SearchStringAddition name="СписокСообщенийСтрокаПоиска" id="8">
				<AdditionSource>
					<Item>СписокСообщений</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСообщенийСтрокаПоискаКонтекстноеМеню" id="9"/>
				<ExtendedTooltip name="СписокСообщенийСтрокаПоискаРасширеннаяПодсказка" id="10"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СписокСообщенийСостояниеПросмотра" id="11">
				<AdditionSource>
					<Item>СписокСообщений</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСообщенийСостояниеПросмотраКонтекстноеМеню" id="12"/>
				<ExtendedTooltip name="СписокСообщенийСостояниеПросмотраРасширеннаяПодсказка" id="13"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СписокСообщенийУправлениеПоиском" id="14">
				<AdditionSource>
					<Item>СписокСообщений</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СписокСообщенийУправлениеПоискомКонтекстноеМеню" id="15"/>
				<ExtendedTooltip name="СписокСообщенийУправлениеПоискомРасширеннаяПодсказка" id="16"/>
			</SearchControlAddition>
			<Events>
				<Event name="Selection">СписокСообщенийВыбор</Event>
			</Events>
			<ChildItems>
				<ColumnGroup name="СписокСообщенийГруппа1" id="26">
					<ReadOnly>true</ReadOnly>
					<ExtendedTooltip name="СписокСообщенийГруппа1РасширеннаяПодсказка" id="27"/>
					<ChildItems>
						<ColumnGroup name="СписокСообщенийГруппа2" id="31">
							<Group>InCell</Group>
							<ExtendedTooltip name="СписокСообщенийГруппа2РасширеннаяПодсказка" id="32"/>
							<ChildItems>
								<LabelField name="СписокСообщенийСообщениеАвтор" id="23">
									<DataPath>СписокСообщений.Сообщение.Автор</DataPath>
									<TextColor>style:ButtonBorderColor</TextColor>
									<ContextMenu name="СписокСообщенийСообщениеАвторКонтекстноеМеню" id="24"/>
									<ExtendedTooltip name="СписокСообщенийСообщениеАвторРасширеннаяПодсказка" id="25"/>
								</LabelField>
								<LabelField name="СписокСообщенийСообщениеДатаСоздания" id="28">
									<DataPath>СписокСообщений.Сообщение.ДатаСоздания</DataPath>
									<TextColor>style:ButtonBorderColor</TextColor>
									<ContextMenu name="СписокСообщенийСообщениеДатаСозданияКонтекстноеМеню" id="29"/>
									<ExtendedTooltip name="СписокСообщенийСообщениеДатаСозданияРасширеннаяПодсказка" id="30"/>
								</LabelField>
								<LabelField name="СписокСообщенийСтатус" id="40">
									<DataPath>СписокСообщений.Статус</DataPath>
									<TextColor>style:ButtonBorderColor</TextColor>
									<ContextMenu name="СписокСообщенийСтатусКонтекстноеМеню" id="41"/>
									<ExtendedTooltip name="СписокСообщенийСтатусРасширеннаяПодсказка" id="42"/>
								</LabelField>
							</ChildItems>
						</ColumnGroup>
						<LabelField name="СписокСообщенийСообщениеТекстСообщения" id="37">
							<DataPath>СписокСообщений.Сообщение.ТекстСообщения</DataPath>
							<AutoCellHeight>true</AutoCellHeight>
							<ContextMenu name="СписокСообщенийСообщениеТекстСообщенияКонтекстноеМеню" id="38"/>
							<ExtendedTooltip name="СписокСообщенийСообщениеТекстСообщенияРасширеннаяПодсказка" id="39"/>
						</LabelField>
					</ChildItems>
				</ColumnGroup>
			</ChildItems>
		</Table>
		<UsualGroup name="ГруппаНовоеСообщение" id="35">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа новое сообщение</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа новое сообщение</v8:content>
				</v8:item>
			</ToolTip>
			<Group>AlwaysHorizontal</Group>
			<Representation>StrongSeparation</Representation>
			<ShowTitle>false</ShowTitle>
			<ExtendedTooltip name="ГруппаНовоеСообщениеРасширеннаяПодсказка" id="36"/>
			<ChildItems>
				<InputField name="ТекстНовогоСообщения" id="1">
					<DataPath>Объект.ТекстНовогоСообщения</DataPath>
					<DefaultItem>true</DefaultItem>
					<TitleLocation>None</TitleLocation>
					<MultiLine>true</MultiLine>
					<InputHint>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Введите сюда новое сообщение...</v8:content>
						</v8:item>
					</InputHint>
					<ContextMenu name="ТекстНовогоСообщенияКонтекстноеМеню" id="2"/>
					<ExtendedTooltip name="ТекстНовогоСообщенияРасширеннаяПодсказка" id="3"/>
				</InputField>
				<Button name="ОтправитьСообщение" id="33">
					<Type>UsualButton</Type>
					<CommandName>Form.Command.ОтправитьСообщение</CommandName>
					<ExtendedTooltip name="ОтправитьСообщениеРасширеннаяПодсказка" id="34"/>
				</Button>
			</ChildItems>
		</UsualGroup>
	</ChildItems>
	<Attributes>
		<Attribute name="Объект" id="1">
			<Type>
				<v8:Type>cfg:DataProcessorObject.Чат</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
		</Attribute>
		<Attribute name="СписокСообщений" id="2">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Список сообщений</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>true</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	СообщенияЧата.ТранспортноеСредство КАК ТранспортноеСредство,
	СообщенияЧата.Ссылка КАК Сообщение,
	СообщенияЧата.КаналЧата КАК КаналЧата,
	СообщенияЧата.ДатаСоздания КАК ДатаСоздания,
	СообщенияЧата.Автор.РольСотрудника КАК РольСотрудника,
	СообщенияЧата.Автор КАК Автор,
	СтатусыСообщенийСрезПоследних.Статус КАК Статус
ИЗ
	Справочник.СообщенияЧата КАК СообщенияЧата
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СтатусыСообщений.СрезПоследних КАК СтатусыСообщенийСрезПоследних
		ПО СообщенияЧата.Ссылка = СтатусыСообщенийСрезПоследних.Сообщение
ГДЕ
	НЕ СообщенияЧата.ПометкаУдаления</QueryText>
				<MainTable>Catalog.СообщенияЧата</MainTable>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>ДатаСоздания</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
					<dcsset:itemsViewMode>Normal</dcsset:itemsViewMode>
					<dcsset:itemsUserSettingID>911b6018-f537-43e8-a417-da56b22f9aec</dcsset:itemsUserSettingID>
				</ListSettings>
			</Settings>
		</Attribute>
		<ConditionalAppearance>
			<dcsset:item>
				<dcsset:selection>
					<dcsset:item>
						<dcsset:field>СписокСообщений</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:filter>
					<dcsset:item xsi:type="dcsset:FilterItemGroup">
						<dcsset:groupType>OrGroup</dcsset:groupType>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СписокСообщений.Автор</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Сотрудники.ПустаяСсылка</dcsset:right>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СписокСообщений.РольСотрудника</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:DesignTimeValue">Перечисление.РолиСотрудников.Водитель</dcsset:right>
						</dcsset:item>
					</dcsset:item>
				</dcsset:filter>
				<dcsset:appearance>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:HorizontalAlign">Right</dcscor:value>
					</dcscor:item>
				</dcsset:appearance>
			</dcsset:item>
			<dcsset:item>
				<dcsset:selection>
					<dcsset:item>
						<dcsset:field>СписокСообщенийСтатус</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:filter>
					<dcsset:item xsi:type="dcsset:FilterItemComparison">
						<dcsset:left xsi:type="dcscor:Field">СписокСообщений.Автор</dcsset:left>
						<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
						<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Сотрудники.ПустаяСсылка</dcsset:right>
					</dcsset:item>
				</dcsset:filter>
				<dcsset:appearance>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:use>false</dcscor:use>
						<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:HorizontalAlign">Right</dcscor:value>
					</dcscor:item>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>Текст</dcscor:parameter>
						<dcscor:value xsi:type="xs:string"/>
					</dcscor:item>
				</dcsset:appearance>
			</dcsset:item>
		</ConditionalAppearance>
	</Attributes>
	<Commands>
		<Command name="ОтправитьСообщение" id="1">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отправить</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отправить сообщение</v8:content>
				</v8:item>
			</ToolTip>
			<Picture>
				<xr:Ref>StdPicture.SendMessage</xr:Ref>
				<xr:LoadTransparent>true</xr:LoadTransparent>
			</Picture>
			<Action>ОтправитьСообщение</Action>
			<Representation>TextPicture</Representation>
		</Command>
		<Command name="ПроверитьНовыеСообщения" id="2">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Проверить новые сообщения</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Проверить новые сообщения</v8:content>
				</v8:item>
			</ToolTip>
			<Picture>
				<xr:Ref>StdPicture.Refresh</xr:Ref>
				<xr:LoadTransparent>true</xr:LoadTransparent>
			</Picture>
			<Action>ПроверитьНовыеСообщения</Action>
		</Command>
	</Commands>
	<Parameters>
		<Parameter name="ИмяКанала">
			<Type>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</Type>
			<KeyParameter>true</KeyParameter>
		</Parameter>
	</Parameters>
</Form>